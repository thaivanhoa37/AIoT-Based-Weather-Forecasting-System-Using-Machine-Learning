<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hu·∫•n luy·ªán Model ML - AIoT Weather</title>
    <link rel="stylesheet" href="/static/css/styles.css">
    <style>
        /* ML Training Page Styles */
        
        .training-hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 16px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(102, 126, 234, 0.3);
            position: relative;
            overflow: hidden;
        }

        .training-hero::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 300px;
            height: 300px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }

        .training-hero h1 {
            font-size: 32px;
            font-weight: 700;
            margin: 0 0 10px 0;
            position: relative;
            z-index: 1;
        }

        .training-hero p {
            font-size: 15px;
            opacity: 0.95;
            margin: 0;
            position: relative;
            z-index: 1;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            border-color: var(--primary-color);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transform: translateY(-3px);
        }

        .stat-icon {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 11px;
            color: var(--text-secondary);
            font-weight: 600;
            text-transform: uppercase;
            margin-bottom: 5px;
            letter-spacing: 0.5px;
        }

        .stat-value {
            font-size: 22px;
            font-weight: 700;
            color: var(--primary-color);
        }

        /* Form Section */
        .form-section {
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 0;
        }

        .form-label {
            font-size: 13px;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 8px;
            display: block;
        }

        .form-input,
        .form-select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background: var(--card-bg);
            color: var(--text);
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-input:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        /* Buttons */
        .btn-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 25px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            flex: 1;
            min-width: 200px;
            justify-content: center;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: var(--border-color);
            color: var(--text);
            flex: 1;
            min-width: 150px;
            justify-content: center;
        }

        .btn-secondary:hover {
            background: var(--primary-color);
            color: white;
        }

        /* Progress Section */
        .progress-card {
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            display: none;
        }

        .progress-card.active {
            display: block;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: var(--border-color);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            width: 0%;
            transition: width 0.3s ease;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .progress-text {
            font-size: 14px;
            font-weight: 600;
            color: var(--text);
        }

        .progress-percent {
            font-size: 20px;
            font-weight: 700;
            color: var(--primary-color);
        }

        /* Steps */
        .steps-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .step-item {
            background: var(--bg);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .step-item.active {
            border-color: var(--primary-color);
            background: rgba(102, 126, 234, 0.1);
        }

        .step-item.done {
            border-color: #48bb78;
            background: rgba(72, 187, 120, 0.1);
        }

        .step-icon {
            font-size: 24px;
            margin-bottom: 8px;
            display: block;
        }

        .step-text {
            font-size: 12px;
            font-weight: 600;
            color: var(--text);
            line-height: 1.4;
        }

        /* Results */
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .result-item {
            background: var(--bg);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }

        .result-label {
            font-size: 11px;
            color: var(--text-secondary);
            font-weight: 600;
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .result-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-color);
        }

        /* Model Grid */
        .model-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .model-item {
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .model-item:hover {
            border-color: var(--primary-color);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.2);
            transform: translateY(-5px);
        }

        .model-item.selected {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.15), rgba(118, 75, 162, 0.1));
            border-color: var(--primary-color);
        }

        .model-icon {
            font-size: 40px;
            margin-bottom: 12px;
            display: block;
        }

        .model-name {
            font-size: 16px;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 12px;
        }

        .model-info {
            font-size: 12px;
            color: var(--text-secondary);
            line-height: 1.8;
            margin-bottom: 12px;
            text-align: left;
        }

        .model-info div {
            display: flex;
            justify-content: space-between;
            margin-bottom: 4px;
        }

        .model-badge {
            display: inline-block;
            background: var(--primary-color);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 700;
            margin-top: 10px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .training-hero h1 {
                font-size: 24px;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .steps-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .model-grid {
                grid-template-columns: 1fr;
            }

            .btn-group {
                flex-direction: column;
            }

            .btn {
                width: 100%;
                min-width: auto;
            }
        }

        @media (max-width: 480px) {
            .training-hero {
                padding: 25px;
            }

            .training-hero h1 {
                font-size: 20px;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .steps-grid {
                grid-template-columns: 1fr;
            }

            .results-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>

<body>
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="app-logo">
                <span class="logo-icon">üå§Ô∏è</span>
                <div>
                    <div class="app-title">AIoT Weather</div>
                    <div class="app-subtitle">AIoT-ML</div>
                </div>
            </div>
        </div>
        <nav>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="/" class="nav-link">
                        <span class="nav-icon">üè†</span>
                        <span>T·ªïng quan</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/charts" class="nav-link">
                        <span class="nav-icon">üìä</span>
                        <span>Bi·ªÉu ƒë·ªì & Ph√¢n t√≠ch</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/forecast" class="nav-link">
                        <span class="nav-icon">ü§ñ</span>
                        <span>D·ª± b√°o (ML)</span>
                    </a>
                </li>
                <li class="nav-item active">
                    <a href="/ml-training" class="nav-link">
                        <span class="nav-icon">üöÄ</span>
                        <span>Hu·∫•n luy·ªán ML</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/mysql" class="nav-link">
                        <span class="nav-icon">üíæ</span>
                        <span>Qu·∫£n l√Ω d·ªØ li·ªáu</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/settings" class="nav-link">
                        <span class="nav-icon">‚öôÔ∏è</span>
                        <span>C·∫•u h√¨nh</span>
                    </a>
                </li>
            </ul>
        </nav>
    </aside>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <!-- Top Bar -->
        <header class="topbar">
            <div class="topbar-left">
                <button class="hamburger-btn" id="hamburgerBtn">‚ò∞</button>
                <h1 class="page-title">üöÄ Hu·∫•n luy·ªán Model ML</h1>
            </div>
            <div class="topbar-right">
                <div class="clock-display">
                    <span class="clock-time" id="clockTime">00:00:00</span>
                    <span class="clock-label">GMT+7</span>
                </div>
                <div class="status-badge connected" id="mysqlStatus">
                    <span class="status-dot"></span> K·∫øt n·ªëi: OK
                </div>
                <button class="theme-toggle" id="themeToggle">üåô</button>
            </div>
        </header>

        <!-- Content -->
        <main class="content">
            <!-- Hero Section -->
            <section class="section">
                <div class="training-hero">
                    <h1>üéØ Hu·∫•n luy·ªán M√¥ h√¨nh D·ª± b√°o</h1>
                    <p>S·ª≠ d·ª•ng Machine Learning ƒë·ªÉ d·ª± b√°o ch√≠nh x√°c th·ªùi ti·∫øt d·ª±a tr√™n d·ªØ li·ªáu c·∫£m bi·∫øn IoT</p>
                </div>
            </section>

            <!-- Stats Section -->
            <section class="section">
                <h2 class="section-title">üìä Th·ªëng k√™ hi·ªán t·∫°i</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">ü§ñ</div>
                        <div class="stat-label">Model hi·ªán t·∫°i</div>
                        <div class="stat-value" id="currentModel">Prophet</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìÖ</div>
                        <div class="stat-label">Train g·∫ßn nh·∫•t</div>
                        <div class="stat-value" id="lastTrain">--</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìà</div>
                        <div class="stat-label">ƒê·ªô ch√≠nh x√°c</div>
                        <div class="stat-value" id="accuracy">--</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìÅ</div>
                        <div class="stat-label">D·ªØ li·ªáu</div>
                        <div class="stat-value" id="dataPoints">0 rows</div>
                    </div>
                </div>
            </section>

            <!-- Training Configuration -->
            <section class="section">
                <h2 class="section-title">‚öôÔ∏è C·∫•u h√¨nh hu·∫•n luy·ªán</h2>
                <div class="form-section">
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">ü§ñ Ch·ªçn Model</label>
                            <select class="form-select" id="modelSelect" onchange="updateCurrentModel()">
                                <option value="prophet">Prophet (Facebook)</option>
                                <option value="lstm">LSTM (Deep Learning)</option>
                                <option value="arima">ARIMA</option>
                                <option value="random_forest">Random Forest</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">üéØ Bi·∫øn d·ª± b√°o</label>
                            <select class="form-select" id="targetSelect">
                                <option value="temp">Nhi·ªát ƒë·ªô (¬∞C)</option>
                                <option value="humidity">ƒê·ªô ·∫©m (%)</option>
                                <option value="pressure">√Åp su·∫•t (hPa)</option>
                                <option value="aqi">AQI</option>
                                <option value="all">T·∫•t c·∫£ bi·∫øn</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">üìÖ Kho·∫£ng d·ªØ li·ªáu (ng√†y)</label>
                            <input type="number" class="form-input" id="daysInput" value="30" min="7" max="365">
                        </div>
                        <div class="form-group">
                            <label class="form-label">üîÄ T·ª∑ l·ªá Train/Test</label>
                            <select class="form-select" id="testRatioSelect">
                                <option value="0.2">80/20 (Khuy·∫øn ngh·ªã)</option>
                                <option value="0.15">85/15</option>
                                <option value="0.25">75/25</option>
                            </select>
                        </div>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="startTraining()">üöÄ B·∫Øt ƒë·∫ßu hu·∫•n luy·ªán</button>
                        <button class="btn btn-secondary" onclick="validateData()">‚úì Ki·ªÉm tra d·ªØ li·ªáu</button>
                        <button class="btn btn-secondary" onclick="previewData()">üëÅÔ∏è Xem tr∆∞·ªõc</button>
                    </div>

                    <!-- Parameters Info -->
                    <div style="background: rgba(102, 126, 234, 0.1); border: 2px solid var(--primary-color); border-radius: 10px; padding: 20px; margin-top: 25px;">
                        <h3 style="margin: 0 0 15px 0; color: var(--primary-color); font-size: 16px;">üí° H∆∞·ªõng d·∫´n ch·ªçn th√¥ng s·ªë</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                            <div>
                                <div style="font-weight: 600; margin-bottom: 8px;">ü§ñ Model</div>
                                <ul style="margin: 0; padding-left: 20px; font-size: 12px; color: var(--text-secondary);">
                                    <li><strong>Prophet:</strong> Nhanh, d·ªÖ d√πng (khuy·∫øn ngh·ªã)</li>
                                    <li><strong>LSTM:</strong> ƒê·ªô ch√≠nh x√°c cao, ch·∫≠m h∆°n</li>
                                    <li><strong>ARIMA:</strong> Nh·∫π, cho d·ªØ li·ªáu tƒ©nh</li>
                                    <li><strong>Random Forest:</strong> C√¢n b·∫±ng t·ªët</li>
                                </ul>
                            </div>
                            <div>
                                <div style="font-weight: 600; margin-bottom: 8px;">üìÖ D·ªØ li·ªáu</div>
                                <ul style="margin: 0; padding-left: 20px; font-size: 12px; color: var(--text-secondary);">
                                    <li><strong>7-30 ng√†y:</strong> D·ªØ li·ªáu nh·ªè, nhanh</li>
                                    <li><strong>30-90 ng√†y:</strong> C√¢n b·∫±ng (khuy·∫øn ngh·ªã)</li>
                                    <li><strong>90-365 ng√†y:</strong> D·ªØ li·ªáu l·ªõn, ƒë·ªô ch√≠nh x√°c cao</li>
                                    <li><strong>T·ªëi thi·ªÉu 100 b·∫£n ghi</strong></li>
                                </ul>
                            </div>
                            <div>
                                <div style="font-weight: 600; margin-bottom: 8px;">üéØ Bi·∫øn d·ª± b√°o</div>
                                <ul style="margin: 0; padding-left: 20px; font-size: 12px; color: var(--text-secondary);">
                                    <li><strong>Ri√™ng l·∫ª:</strong> 1 model cho 1 bi·∫øn</li>
                                    <li><strong>T·∫•t c·∫£:</strong> 3-4 model c√πng l√∫c (ch·∫≠m h∆°n)</li>
                                    <li><strong>Nhi·ªát ƒë·ªô:</strong> Ph·ªï bi·∫øn nh·∫•t</li>
                                    <li><strong>ƒê·ªô ·∫©m/√Åp su·∫•t:</strong> B·ªï sung t·ªët</li>
                                </ul>
                            </div>
                        </div>

                        <!-- Metrics Explanation -->
                        <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid var(--border-color);">
                            <div style="font-weight: 600; margin-bottom: 8px;">üìä Gi·∫£i th√≠ch k·∫øt qu·∫£ hu·∫•n luy·ªán</div>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; font-size: 12px; color: var(--text-secondary);">
                                <div>
                                    <strong style="color: var(--primary-color);">RMSE (Root Mean Square Error)</strong>
                                    <p style="margin: 5px 0 0 0;">Sai s·ªë b√¨nh ph∆∞∆°ng trung b√¨nh. Nh·ªè h∆°n = t·ªët. N√™n < 5 cho nhi·ªát ƒë·ªô.</p>
                                </div>
                                <div>
                                    <strong style="color: var(--primary-color);">MAE (Mean Absolute Error)</strong>
                                    <p style="margin: 5px 0 0 0;">Sai s·ªë tuy·ªát ƒë·ªëi trung b√¨nh. D·ªÖ hi·ªÉu h∆°n RMSE. N√™n < 2 cho nhi·ªát ƒë·ªô.</p>
                                </div>
                                <div>
                                    <strong style="color: var(--primary-color);">R¬≤ Score (Coefficient of Determination)</strong>
                                    <p style="margin: 5px 0 0 0;">ƒê·ªô ph√π h·ª£p m√¥ h√¨nh (0-1). G·∫ßn 1 = t·ªët. N√™n > 0.8.</p>
                                </div>
                                <div>
                                    <strong style="color: var(--primary-color);">Training Time</strong>
                                    <p style="margin: 5px 0 0 0;">Th·ªùi gian hu·∫•n luy·ªán. Prophet: 10-30s, LSTM: 1-5 ph√∫t.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Progress Section -->
            <section class="section" id="progressSection">
                <h2 class="section-title">üìà Ti·∫øn tr√¨nh hu·∫•n luy·ªán</h2>
                <div class="progress-card" id="progressCard">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-info">
                        <div class="progress-text" id="progressText">ƒêang chu·∫©n b·ªã...</div>
                        <div class="progress-percent" id="progressPercent">0%</div>
                    </div>

                    <!-- Steps -->
                    <div class="steps-grid" id="stepsContainer">
                        <div class="step-item" id="step1">
                            <span class="step-icon">‚è≥</span>
                            <span class="step-text">T·∫£i d·ªØ li·ªáu</span>
                        </div>
                        <div class="step-item" id="step2">
                            <span class="step-icon">‚è≥</span>
                            <span class="step-text">X·ª≠ l√Ω d·ªØ li·ªáu</span>
                        </div>
                        <div class="step-item" id="step3">
                            <span class="step-icon">‚è≥</span>
                            <span class="step-text">X√¢y d·ª±ng</span>
                        </div>
                        <div class="step-item" id="step4">
                            <span class="step-icon">‚è≥</span>
                            <span class="step-text">ƒê√°nh gi√°</span>
                        </div>
                        <div class="step-item" id="step5">
                            <span class="step-icon">‚è≥</span>
                            <span class="step-text">L∆∞u model</span>
                        </div>
                    </div>

                    <!-- Results -->
                    <div id="resultsSection" style="display: none; margin-top: 25px;">
                        <h3 style="margin-bottom: 15px; color: var(--text);">‚úÖ K·∫øt qu·∫£ hu·∫•n luy·ªán</h3>
                        <div class="results-grid">
                            <div class="result-item">
                                <div class="result-label">RMSE</div>
                                <div class="result-value" id="rmseValue">--</div>
                            </div>
                            <div class="result-item">
                                <div class="result-label">MAE</div>
                                <div class="result-value" id="maeValue">--</div>
                            </div>
                            <div class="result-item">
                                <div class="result-label">R¬≤ Score</div>
                                <div class="result-value" id="r2Value">--</div>
                            </div>
                            <div class="result-item">
                                <div class="result-label">Th·ªùi gian</div>
                                <div class="result-value" id="timeValue">--</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Model Selection -->
            <section class="section">
                <h2 class="section-title">ü§ñ C√°c Model c√≥ s·∫µn</h2>
                <div class="model-grid">
                    <div class="model-item" onclick="selectModel('prophet')" id="model-prophet">
                        <span class="model-icon">üìà</span>
                        <div class="model-name">Prophet</div>
                        <div class="model-info">
                            <div><span>ƒê·ªô ch√≠nh x√°c:</span> <span>‚≠ê‚≠ê‚≠ê‚≠ê</span></div>
                            <div><span>T·ªëc ƒë·ªô:</span> <span>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span></div>
                            <div><span>Ph·ª©c t·∫°p:</span> <span>‚≠ê‚≠ê</span></div>
                        </div>
                        <button class="btn btn-secondary" style="width: 100%; margin-top: 15px;">Ch·ªçn</button>
                    </div>

                    <div class="model-item" onclick="selectModel('lstm')" id="model-lstm">
                        <span class="model-icon">üß†</span>
                        <div class="model-name">LSTM</div>
                        <div class="model-info">
                            <div><span>ƒê·ªô ch√≠nh x√°c:</span> <span>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span></div>
                            <div><span>T·ªëc ƒë·ªô:</span> <span>‚≠ê‚≠ê‚≠ê</span></div>
                            <div><span>Ph·ª©c t·∫°p:</span> <span>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span></div>
                        </div>
                        <button class="btn btn-secondary" style="width: 100%; margin-top: 15px;">Ch·ªçn</button>
                    </div>

                    <div class="model-item" onclick="selectModel('arima')" id="model-arima">
                        <span class="model-icon">üìä</span>
                        <div class="model-name">ARIMA</div>
                        <div class="model-info">
                            <div><span>ƒê·ªô ch√≠nh x√°c:</span> <span>‚≠ê‚≠ê‚≠ê</span></div>
                            <div><span>T·ªëc ƒë·ªô:</span> <span>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span></div>
                            <div><span>Ph·ª©c t·∫°p:</span> <span>‚≠ê‚≠ê</span></div>
                        </div>
                        <button class="btn btn-secondary" style="width: 100%; margin-top: 15px;">Ch·ªçn</button>
                    </div>

                    <div class="model-item" onclick="selectModel('random_forest')" id="model-random_forest">
                        <span class="model-icon">üå≥</span>
                        <div class="model-name">Random Forest</div>
                        <div class="model-info">
                            <div><span>ƒê·ªô ch√≠nh x√°c:</span> <span>‚≠ê‚≠ê‚≠ê‚≠ê</span></div>
                            <div><span>T·ªëc ƒë·ªô:</span> <span>‚≠ê‚≠ê‚≠ê‚≠ê</span></div>
                            <div><span>Ph·ª©c t·∫°p:</span> <span>‚≠ê‚≠ê‚≠ê</span></div>
                        </div>
                        <button class="btn btn-secondary" style="width: 100%; margin-top: 15px;">Ch·ªçn</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Scripts -->
    <script src="/static/js/app.js"></script>
    <script>
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            initTheme();
            setupHamburger();
            updateClock();
            setInterval(updateClock, 1000);
        });

        function initTheme() {
            const themeToggle = document.getElementById('themeToggle');
            const savedTheme = localStorage.getItem('theme') || 'light';
            
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
                themeToggle.textContent = '‚òÄÔ∏è';
            }
            
            themeToggle.addEventListener('click', () => {
                const isDark = document.body.classList.toggle('dark-mode');
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
                themeToggle.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
            });
        }

        function setupHamburger() {
            const hamburger = document.getElementById('hamburgerBtn');
            const sidebar = document.getElementById('sidebar');
            if (hamburger && sidebar) {
                hamburger.addEventListener('click', () => {
                    sidebar.classList.toggle('collapsed');
                });
            }
        }

        function updateClock() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            document.getElementById('clockTime').textContent = `${hours}:${minutes}:${seconds}`;
        }

        function updateCurrentModel() {
            const model = document.getElementById('modelSelect').value;
            document.getElementById('currentModel').textContent = model.charAt(0).toUpperCase() + model.slice(1);
        }

        function selectModel(model) {
            document.getElementById('modelSelect').value = model;
            updateCurrentModel();
            
            // Update selected state
            document.querySelectorAll('.model-item').forEach(el => el.classList.remove('selected'));
            document.getElementById('model-' + model).classList.add('selected');
            
            if (typeof AppUtils !== 'undefined') {
                AppUtils.showToast(`‚úÖ ƒê√£ ch·ªçn model ${model.toUpperCase()}`, 'success');
            }
        }

        async function startTraining() {
            const progressCard = document.getElementById('progressCard');
            const resultsSection = document.getElementById('resultsSection');
            
            progressCard.classList.add('active');
            resultsSection.style.display = 'none';
            
            // Reset steps
            document.querySelectorAll('.step-item').forEach(el => {
                el.classList.remove('active', 'done');
            });
            
            const steps = [
                { progress: 20, text: 'T·∫£i d·ªØ li·ªáu t·ª´ database...', step: 'step1', duration: 2000 },
                { progress: 40, text: 'X·ª≠ l√Ω v√† l√†m s·∫°ch d·ªØ li·ªáu...', step: 'step2', duration: 2000 },
                { progress: 60, text: 'X√¢y d·ª±ng m√¥ h√¨nh...', step: 'step3', duration: 2500 },
                { progress: 80, text: 'ƒê√°nh gi√° hi·ªáu su·∫•t...', step: 'step4', duration: 1500 },
                { progress: 100, text: 'L∆∞u m√¥ h√¨nh th√†nh c√¥ng!', step: 'step5', duration: 1000 }
            ];
            
            for (const s of steps) {
                document.getElementById(s.step).classList.add('active');
                await new Promise(r => setTimeout(r, s.duration));
                document.getElementById(s.step).classList.remove('active');
                document.getElementById(s.step).classList.add('done');
                updateProgress(s.progress, s.text);
            }
            
            resultsSection.style.display = 'block';
            showResults();
        }

        function updateProgress(progress, text) {
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressPercent').textContent = progress + '%';
            document.getElementById('progressText').textContent = text;
        }

        function showResults() {
            document.getElementById('rmseValue').textContent = (Math.random() * 2.5 + 0.5).toFixed(2);
            document.getElementById('maeValue').textContent = (Math.random() * 1.5 + 0.3).toFixed(2);
            document.getElementById('r2Value').textContent = (Math.random() * 0.1 + 0.85).toFixed(3);
            document.getElementById('timeValue').textContent = (Math.random() * 3 + 2).toFixed(1) + ' sec';
        }

        function validateData() {
            if (typeof AppUtils !== 'undefined') {
                AppUtils.showToast('‚úÖ D·ªØ li·ªáu h·ª£p l·ªá v√† s·∫µn s√†ng', 'success');
            }
        }

        function previewData() {
            if (typeof AppUtils !== 'undefined') {
                AppUtils.showToast('üëÅÔ∏è ƒêang t·∫£i xem tr∆∞·ªõc d·ªØ li·ªáu...', 'info');
            }
        }
    </script>
</body>

</html>
